# checkpoints/bronze_quality_check.yml
# ─────────────────────────────────────────────────────────────────────────────
# Bronze Quality Checkpoint
# Severity: NON-BLOCKING — logs failures, pipeline continues
# Triggered by: ingestion_pipeline DAG after batch ingest
# ─────────────────────────────────────────────────────────────────────────────
name: bronze_quality_check
config_version: 1.0
class_name: SimpleCheckpoint
run_name_template: "bronze_%Y%m%d_%H%M%S"

validations:
  - batch_request:
      datasource_name: bronze_minio
      data_connector_name: bronze_connector
      data_asset_name: twitter/tweets
      data_connector_query:
        index: -1    # Most recent batch
    expectation_suite_name: bronze.twitter.tweets
    action_list:
      - name: store_validation_result
        action:
          class_name: StoreValidationResultAction
      - name: update_data_docs
        action:
          class_name: UpdateDataDocsAction
          site_names: [local_site]
      # Non-blocking: no SlackNotificationAction or raise_on_failed_expectations
